---
title: ผู้สังเกตการณ์การกลายพันธุ์ DOM ด้วย Aspose.HTML สำหรับ Java
linktitle: ผู้สังเกตการณ์การกลายพันธุ์ DOM - การสังเกตการเพิ่มโหนด
second_title: การประมวลผล Java HTML ด้วย Aspose.HTML
description: เรียนรู้วิธีใช้ Aspose.HTML สำหรับ Java เพื่อใช้งาน DOM Mutation Observer ในคำแนะนำทีละขั้นตอนนี้ ติดตามและตอบสนองต่อการเปลี่ยนแปลง DOM อย่างมีประสิทธิภาพ
type: docs
weight: 11
url: /th/java/advanced-usage/dom-mutation-observer-observing-node-additions/
---

คุณเป็นนักพัฒนา Java ที่ต้องการสังเกตและตอบสนองต่อการเปลี่ยนแปลง Document Object Model (DOM) ของเอกสาร HTML หรือไม่? Aspose.HTML สำหรับ Java มอบโซลูชันที่มีประสิทธิภาพสำหรับงานนี้ ในคำแนะนำทีละขั้นตอนนี้ เราจะสำรวจวิธีใช้ Aspose.HTML สำหรับ Java เพื่อสร้างเอกสาร HTML และสังเกตการเพิ่มโหนดด้วย Mutation Observer บทช่วยสอนนี้จะแนะนำคุณตลอดกระบวนการ โดยแบ่งแต่ละตัวอย่างออกเป็นหลายขั้นตอน ในตอนท้าย คุณจะสามารถนำ DOM Mutation Observers ไปใช้งานในโปรเจ็กต์ Java ของคุณได้อย่างง่ายดาย

## ข้อกำหนดเบื้องต้น

ก่อนที่เราจะเจาะลึกเรื่องการใช้ Aspose.HTML สำหรับ Java เรามาตรวจสอบให้แน่ใจว่าคุณมีข้อกำหนดเบื้องต้นที่จำเป็น:

1. สภาพแวดล้อมการพัฒนา Java: ตรวจสอบให้แน่ใจว่าคุณได้ติดตั้ง Java Development Kit (JDK) บนระบบของคุณ

2.  Aspose.HTML สำหรับ Java: คุณจะต้องดาวน์โหลดและติดตั้ง Aspose.HTML สำหรับ Java คุณสามารถค้นหาลิงค์ดาวน์โหลด[ที่นี่](https://releases.aspose.com/html/java/).

3. IDE (Integrated Development Environment): ใช้ Java IDE ที่คุณต้องการ เช่น IntelliJ IDEA หรือ Eclipse ในการเขียนและรันโค้ด Java

## แพ็คเกจนำเข้า

ในการเริ่มต้นใช้งาน Aspose.HTML สำหรับ Java คุณจะต้องนำเข้าแพ็คเกจที่จำเป็นลงในโค้ด Java ของคุณ ต่อไปนี้คือวิธีที่คุณสามารถทำได้:

```java
// นำเข้าแพ็คเกจที่จำเป็น
import com.aspose.html.HTMLDocument;
import com.aspose.html.dom.mutations.MutationObserver;
import com.aspose.html.dom.mutations.MutationCallback;
import com.aspose.html.dom.mutations.MutationRecord;
import com.aspose.html.dom.mutations.MutationObserverInit;
import com.aspose.html.dom.Element;
import com.aspose.html.dom.Text;
import com.aspose.html.generic.IGenericList;

// สร้างเอกสาร HTML เปล่า
HTMLDocument document = new HTMLDocument();
```

ตอนนี้คุณได้นำเข้าแพ็คเกจที่จำเป็นแล้ว มาดูคำแนะนำทีละขั้นตอนเพื่อใช้งาน DOM Mutation Observer ใน Java กัน

## ขั้นตอนที่ 1: สร้างอินสแตนซ์ผู้สังเกตการณ์การกลายพันธุ์

ขั้นแรก คุณต้องสร้างอินสแตนซ์ Mutation Observer ผู้สังเกตการณ์นี้จะคอยดูการเปลี่ยนแปลงใน DOM และดำเนินการฟังก์ชันโทรกลับเมื่อเกิดการกลายพันธุ์

```java
MutationObserver observer = new MutationObserver(new MutationCallback() {
    @Override
    public void invoke(IGenericList<MutationRecord> mutations, MutationObserver mutationObserver) {
        mutations.forEach(mutationRecord -> {
            mutationRecord.getAddedNodes().forEach(node -> {
                synchronized (this) {
                    System.out.println("The '" + node + "' node was added to the document.");
                    notifyAll();
                }
            });
        });
    }
});
```

ในขั้นตอนนี้ เราสร้างผู้สังเกตการณ์ด้วยฟังก์ชันโทรกลับที่จะพิมพ์ข้อความเมื่อมีการเพิ่มโหนดใน DOM

## ขั้นตอนที่ 2: กำหนดค่าผู้สังเกตการณ์

ตอนนี้ มากำหนดค่าผู้สังเกตการณ์ด้วยตัวเลือกที่ต้องการกันดีกว่า เราต้องการสังเกตการเปลี่ยนแปลงรายการย่อยและการเปลี่ยนแปลงแผนผังย่อย รวมถึงการเปลี่ยนแปลงข้อมูลอักขระ

```java
MutationObserverInit config = new MutationObserverInit();
config.setChildList(true);
config.setSubtree(true);
config.setCharacterData(true);

// ผ่านโหนดเป้าหมายเพื่อสังเกตการกำหนดค่าที่ระบุ
observer.observe(document.getBody(), config);
```

 ที่นี่เราตั้งค่า`config` วัตถุเพื่อเปิดใช้งานการสังเกตรายการลูก แผนผังย่อย และการเปลี่ยนแปลงข้อมูลอักขระ จากนั้นเราก็ส่งผ่านโหนดเป้าหมาย (ในกรณีนี้คือไฟล์`<body>`) และการกำหนดค่าให้กับผู้สังเกตการณ์

## ขั้นตอนที่ 3: แก้ไข DOM

ตอนนี้ เราจะทำการเปลี่ยนแปลงบางอย่างกับ DOM เพื่อกระตุ้นผู้สังเกตการณ์ เราจะสร้างองค์ประกอบย่อหน้าและผนวกเข้ากับเนื้อหาของเอกสาร

```java
// สร้างองค์ประกอบย่อหน้าและผนวกเข้ากับเนื้อหาของเอกสาร
Element p = document.createElement("p");
document.getBody().appendChild(p);

// สร้างข้อความและต่อท้ายย่อหน้า
Text text = document.createTextNode("Hello World");
p.appendChild(text);
```

ในขั้นตอนนี้ เราสร้างองค์ประกอบย่อหน้า HTML และเพิ่มลงในเนื้อหาของเอกสาร จากนั้นเราสร้างโหนดข้อความที่มีเนื้อหา "Hello World" และต่อท้ายย่อหน้า

## ขั้นตอนที่ 4: รอการสังเกต (แบบอะซิงโครนัส)

เนื่องจากการสังเกตการกลายพันธุ์แบบอะซิงโครนัส เราจึงต้องรอสักครู่เพื่อให้ผู้สังเกตการณ์จับการเปลี่ยนแปลงได้ เราจะใช้`synchronized` และ`wait` เพื่อจุดประสงค์นี้ ดังที่แสดงด้านล่าง

```java
// เนื่องจากการกลายพันธุ์กำลังทำงานในโหมดอะซิงก์ โปรดรอสักครู่
synchronized (this) {
    wait(5000);
}
```

ในกรณีนี้ เรารอเป็นเวลา 5 วินาทีเพื่อให้แน่ใจว่าผู้สังเกตการณ์มีโอกาสจับภาพการกลายพันธุ์ใดๆ ได้

## ขั้นตอนที่ 5: หยุดการสังเกต

สุดท้ายนี้ เมื่อคุณสังเกตการณ์เสร็จแล้ว จำเป็นต้องตัดการเชื่อมต่อของผู้สังเกตการณ์เพื่อเผยแพร่ทรัพยากร

```java
// หยุดสังเกต
observer.disconnect();
```

ด้วยขั้นตอนนี้ คุณจะเสร็จสิ้นการสังเกตและสามารถล้างทรัพยากรได้

## บทสรุป

ในบทช่วยสอนนี้ เราได้อธิบายขั้นตอนการใช้ Aspose.HTML สำหรับ Java เพื่อใช้งาน DOM Mutation Observer คุณได้เรียนรู้วิธีสร้างผู้สังเกตการณ์ กำหนดค่า ทำการเปลี่ยนแปลง DOM รอการสังเกต และหยุดการสังเกต ตอนนี้ คุณมีทักษะในการใช้ DOM Mutation Observers ในโปรเจ็กต์ Java ของคุณเพื่อตรวจสอบและตอบสนองต่อการเปลี่ยนแปลงใน DOM ของเอกสาร HTML ได้อย่างมีประสิทธิภาพ

หากคุณมีคำถามหรือพบปัญหา อย่าลังเลที่จะขอความช่วยเหลือใน[ฟอรั่ม Aspose.HTML](https://forum.aspose.com/) . นอกจากนี้คุณยังสามารถเข้าถึง[เอกสารประกอบ](https://reference.aspose.com/html/java/) สำหรับข้อมูลโดยละเอียดเกี่ยวกับ Aspose.HTML สำหรับ Java

## คำถามที่พบบ่อย

### คำถามที่ 1: ผู้สังเกตการณ์การกลายพันธุ์ของ DOM คืออะไร

A1: DOM Mutation Observer เป็นคุณลักษณะ JavaScript ที่ช่วยให้คุณสามารถดูการเปลี่ยนแปลงใน Document Object Model (DOM) ของเอกสาร HTML โดยให้วิธีการตอบสนองต่อการเพิ่ม การลบ หรือการแก้ไขโหนด DOM ในแบบเรียลไทม์

### คำถามที่ 2: ฉันสามารถใช้ Aspose.HTML สำหรับ Java ในโครงการเชิงพาณิชย์ของฉันได้หรือไม่

 ตอบ 2: ได้ คุณสามารถใช้ Aspose.HTML สำหรับ Java ในโครงการเชิงพาณิชย์ได้ คุณสามารถค้นหาข้อมูลใบอนุญาตและการจัดซื้อได้[ที่นี่](https://purchase.aspose.com/buy).

### คำถามที่ 3: Aspose.HTML สำหรับ Java มีรุ่นทดลองใช้ฟรีหรือไม่

 ตอบ 3: ได้ คุณสามารถทดลองใช้ Aspose.HTML สำหรับ Java ได้ฟรี[ที่นี่](https://releases.aspose.com/). สิ่งนี้ช่วยให้คุณสำรวจคุณสมบัติและความสามารถของมันก่อนตัดสินใจซื้อ

### คำถามที่ 4: การสังเกตการเปลี่ยนแปลงข้อมูลอักขระด้วย Mutation Observer มีประโยชน์อย่างไร

A4: การสังเกตการเปลี่ยนแปลงข้อมูลอักขระมีประโยชน์สำหรับสถานการณ์ที่คุณต้องการตรวจสอบและตอบสนองต่อการเปลี่ยนแปลงในเนื้อหาข้อความขององค์ประกอบ HTML ตัวอย่างเช่น คุณสามารถใช้เพื่อติดตามและตอบสนองต่อการป้อนข้อมูลของผู้ใช้ในรูปแบบเว็บ

### คำถามที่ 5: ฉันจะกำจัดทรัพยากรเมื่อใช้ Aspose.HTML สำหรับ Java ได้อย่างไร

 A5: สิ่งสำคัญคือต้องเผยแพร่ทรัพยากรเมื่อคุณดำเนินการเสร็จแล้ว ในตัวอย่างของเรา เราใช้`document.dispose()` เพื่อล้างทรัพยากรที่เกี่ยวข้องกับเอกสาร HTML ตรวจสอบให้แน่ใจว่าได้กำจัดวัตถุและทรัพยากรใด ๆ ที่คุณสร้างขึ้นเพื่อหลีกเลี่ยงการรั่วไหลของหน่วยความจำ